<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Network Viewer WebGL</title>
    <style>
        #container {
            background: #000;
            /*width: 400px;*/
            /*height: 300px;*/
        }

        #header {
            /*background: #111;*/
            height: 80px;
            padding-top: 10px;
        }

        body {
            height: 100%;
        }

        html {
            height: 100%;
        }
    </style>
</head>
<body>

<div id="header">
    <form role="form">
        <div class="form-group container">
            <label for="sifInputFile">Select a SIF file</label>
            <input type="file" id="sifInputFile">
        </div>
    </form>
</div>
<div id="container"></div>

</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<!--&lt;!&ndash; Latest compiled and minified CSS &ndash;&gt;-->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">

<!--&lt;!&ndash; Optional theme &ndash;&gt;-->

<!--<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">-->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cyborg/bootstrap.min.css">

<script type="text/javascript" src="http://cdn.sencha.io/ext/gpl/4.2.1/ext-all.js"></script>

<!--&lt;!&ndash; Latest compiled and minified JavaScript &ndash;&gt;-->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../vendor/underscore-min.js"></script>
<script type="text/javascript" src="../../vendor/backbone-min.js"></script>
<script src="three.min.js"></script>
<script src="js/debugaxis.js"></script>

<script src="../lib/utils/utils.js"></script>
<script src="../network/graph.js"></script>
<script src="../network/network.js"></script>
<script src="../network/network-config.js"></script>
<script src="../network/vertex-config.js"></script>
<script src="../network/edge-config.js"></script>
<script src="../network/default-vertex-renderer.js"></script>
<script src="../network/default-edge-renderer.js"></script>
<script src="../network/attributes/attribute-manager-store.js"></script>
<script src="../network/graph-layout.js"></script>
<script src="../network/vertex.js"></script>
<script src="../network/edge.js"></script>
<script src="../lib/data-source/data-source.js"></script>
<script src="../lib/data-source/file-data-source.js"></script>
<script src="../lib/data-adapter/graph-data-adapter.js"></script>
<script src="../lib/data-adapter/network-data-adapter.js"></script>
<script src="../lib/data-adapter/sif-data-adapter.js"></script>

<script src="network-viewer-webgl.js"></script>

<script type="text/javascript">
    var networkViewerWebgl;
    $(document).ready(function () {

        var w = $('body').width() - 50;
        var h = $('body').height() - $('#header').height() - 5;
        networkViewerWebgl = new NetworkViewerWebgl({
            targetId: 'container',
            height: h,
            width: w,
            autoRender: true

        });

        var potyvirusPorteinNames = ['P1', 'HC-Pro', 'P3', '6K1', 'CI', '6K2', 'VPg', 'Nia-Pro', 'Nib', 'CP', 'P3N-PIPO'];

        /**/
        var sifInputFile = $('#sifInputFile')[0];
        $(sifInputFile).bind('change', function (event) {
            var file = this.files[0];
            var sifDataAdapter = new SIFDataAdapter({
                dataSource: new FileDataSource({file:file}),
                handlers: {
                    'data:load': function (event) {
                        var vertices = event.network.graph.vertices
                        var potyVertices = [];
                        for (var i = 0; i <vertices.length; i++) {
                            var vertex = vertices[i];
                            if(potyvirusPorteinNames.indexOf(vertex.id)!== -1){
                                potyVertices.push(vertex);
                            }
                        }
                        GraphLayout.sphereSurface(vertices, event.network, 200 ,400);
                        GraphLayout.sphereSurface(potyVertices, event.network, 50 ,50);
                        networkViewerWebgl.renderNetwork(event.network);
                    }
                }
            })
        });
        /**/

//
//        handlers: {
//            'edge:add': function (e) {
//                console.log('edge:add');
//                console.log(e.edge);
//                console.log(' ');
//            },
//            'edge:remove': function (e) {
//                console.log('edge:remove');
//                console.log(e.edge);
//                console.log(' ');
//            },
//            'vertex:add': function (e) {
//                console.log('vertex:add');
//                console.log(e.vertex);
//                console.log(' ');
//            },
//            'vertex:remove': function (e) {
//                console.log('vertex:remove');
//                console.log(e.vertex);
//                console.log(' ');
//            }
//        }
//
    });

</script>
</html>
